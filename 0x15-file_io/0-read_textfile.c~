#include "main.h"
#include <stdlib.h>

/**
 * read_textfile - Reads a text file and prints its contents to stdout.
 * @file_name: The name of the text file to read.
 * @max_letters: The maximum number of letters to read.
 *
 * Returns: The number of letters read and printed, or 0 if the file could not be opened or read.
 */
ssize_t read_textfile(const char *file_name, size_t max_letters) {
  // Open the file for reading.
  FILE *fp = fopen(file_name, "r");
  if (fp == NULL) {
    return 0;
  }

  // Allocate a buffer to store the file contents.
  char *buffer = malloc(sizeof(char) * max_letters);
  if (buffer == NULL) {
    fclose(fp);
    return 0;
  }

  // Read the file contents into the buffer.
  ssize_t bytes_read = fread(buffer, sizeof(char), max_letters, fp);

  // Close the file.
  fclose(fp);

  // Print the file contents to stdout.
  write(STDOUT_FILENO, buffer, bytes_read);

  // Free the buffer.
  free(buffer);

  return bytes_read;
}
